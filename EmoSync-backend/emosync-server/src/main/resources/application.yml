# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /

spring:
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/EmoSync_db?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&useSSL=false&serverTimezone=GMT%2b8&allowPublicKeyRetrieval=true
    username: root
    password: rt123456
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
  jpa:
    hibernate:
      ddl-auto: update  # 开发环境可用update，生产环境用validate或none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
    show-sql: false  # 开发环境可开启，生产环境关闭
  # 安全配置
  security:
    user:
      name: admin
      password: admin
  main:
    allow-bean-definition-overriding: true
  ai:
    openai:
      # OpenAI API Key (或 DeepSeek API Key)
      api-key: ${OPENAI_API_KEY:your-api-key-here}

      # 基础 URL (OpenAI 或 DeepSeek)
      base-url: ${OPENAI_BASE_URL:https://api.openai.com}
      # 如果用 DeepSeek: https://api.deepseek.com

      chat:
        enabled: true
        options:
          # 模型名称
          model: ${OPENAI_MODEL:gpt-3.5-turbo}
          # 如果用 DeepSeek: deepseek-chat

          # 温度
          temperature: 0.7

          # 最大 tokens
          max-tokens: 2000

          # 启用流式
          stream: true
  # Web配置
  mvc:
    static-path-pattern: /**  # 允许根路径访问静态资源
  web:
    resources:
      static-locations: classpath:/static/, file:./files/  # 添加files目录

  # 文件上传配置
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB

  # JSON配置
  jackson:
    default-property-inclusion: non_empty


# SpringDoc配置
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    enabled: true
  api-docs:
    path: /v3/api-docs
    enabled: true
  enable-spring-security: false
  paths-to-match: /**
  packages-to-scan: org.example.springboot


# Knife4j配置
knife4j:
  enable: true
  setting:
    language: zh_cn
  basic:
    enable: true
    username: admin
    password: admin


# JWT配置
jwt:
  secret: MySuperLongAndSecureSecretKey12345678901234567890
  expiration: 86400000  # 24小时（毫秒）
  refresh-expiration: 604800000  # 7天（毫秒）
  header: Authorization  # token头部名称
  token-prefix: "Bearer "  # token前缀

# 用户配置
user:
  defaultPassword: 123456

# 文件管理配置
file:
  upload:
    path: ./files
    maxSize: 10485760  # 10MB

EmoSync:
  cloud-name: ${EmoSync.cloudinary.cloud-name}
  api-key: ${EmoSync.cloudinary.api-key}
  api-secret: ${EmoSync.cloudinary.api-secret}
  secure: ${EmoSync.cloudinary.secure}compact