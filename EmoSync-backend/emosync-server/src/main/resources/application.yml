# Server Configuration
server:
  port: 8080
  servlet:
    context-path: /

spring:
  profiles:
    active: dev
  # Data Source Configuration
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/EmoSync_db?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&useSSL=false&serverTimezone=GMT%2b8&allowPublicKeyRetrieval=true
    username: root
    password: rt123456
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
  jpa:
    hibernate:
      ddl-auto: update  # Use update for development, use validate or none for production
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
    show-sql: false  # Can enable in development, disable in production
  # Security Configuration
  security:
    user:
      name: admin
      password: admin
  main:
    allow-bean-definition-overriding: true
  ai:
    chat:
      memory:
        repository:
          jdbc:
            initialize-schema: always
            platform: mariadb
      options:
        tool-calling:
          enabled: true
    openai:
      # OpenAI API Key (or DeepSeek API Key)
      api-key: ${OPENAI_API_KEY}
      # Base URL (OpenAI or DeepSeek)
      base-url: ${OPENAI_BASE_URL}
      # If using DeepSeek: https://api.deepseek.com

      chat:
        enabled: true
        options:
          # Model name
          model: ${OPENAI_MODEL}
          # If using DeepSeek: deepseek-chat

          # Temperature
          temperature: 0.7

          # Maximum tokens
          max-tokens: 2000

          # Enable streaming
          stream: true
          tool-calling:
            enabled: true
        completions-path: /v1/chat/completions
  # Web Configuration
  mvc:
    static-path-pattern: /**  # Allow root path access to static resources
  web:
    resources:
      static-locations: classpath:/static/, file:./files/  # Add files directory

  # File Upload Configuration
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB

  # JSON Configuration
  jackson:
    default-property-inclusion: non_empty


# SpringDoc Configuration
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    enabled: true
  api-docs:
    path: /v3/api-docs
    enabled: true
  enable-spring-security: false
  paths-to-match: /**
  packages-to-scan: com.emosync


# Knife4j Configuration
knife4j:
  enable: true
  setting:
    language: en  # Simple settings
    enable-version: false  # Optional: Hide version number
    enable-swagger-models: true
  documents:
    - group: "API Documentation"
      name: "Mental Health Chatbot"
      locations: classpath:*
  basic:
    enable: true
    username: admin
    password: admin


# JWT Configuration
jwt:
  secret: MySuperLongAndSecureSecretKey12345678901234567890
  expiration: 86400000  # 24 hours (milliseconds)
  refresh-expiration: 604800000  # 7 days (milliseconds)
  header: Authorization  # Token header name
  token-prefix: "Bearer "  # Token prefix

# User Configuration
user:
  defaultPassword: 123456

# File Management Configuration
file:
  upload:
    path: ./files
    maxSize: 10485760  # 10MB

EmoSync:
  cloud-name: ${EmoSync.cloudinary.cloud-name}
  api-key: ${EmoSync.cloudinary.api-key}
  api-secret: ${EmoSync.cloudinary.api-secret}
  secure: true